// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Student {
  id       Int     @id @default(autoincrement())
  email    String
  fullName String
  dept     String?
  enrolled Boolean @default(false)
}

model Subject {
  id       Int     @id @default(autoincrement())
  name     String
  code     String?
}

model Teacher {
  id       Int     @id @default(autoincrement())
  email    String
  fullName String
}

model Product {
  id                String          @id @default(uuid()) @db.Uuid
  name              String       
  slug              String          @unique
  description       String
  basePrice         Float
  gstPercent        Float
  gstAmount         Float
  gestBreakdown     Json
  mrp               Float     
  discountRate      Float
  discountAmount    Float
  finalPrice        Float
  images            Json
  createdAt         DateTime        @default(now())  
  updatedAt         DateTime        @default(now())  

  @@map("products")
}

model Author {
  id                String          @id @default(uuid()) @db.Uuid
  name              String          @default("Anonymous")
  nickName          String          @map("nick_name")
  email             String          @unique
  
  // Define the bi-directional relation
  posts             Post[]          @relation("AuthorPosts")

  @@index([name, email])
  @@map("authors")
}

model Post {
  id                String          @id @default(uuid()) @db.Uuid
  slNum             Int             @default(autoincrement())
  edition           Int          
  title             String          
  authorId          String          @db.Uuid

  // Define the relation field
  author            Author          @relation("AuthorPosts", fields: [authorId], references: [id])

  @@unique([title])
  @@index([title])
  @@map("posts")
}
